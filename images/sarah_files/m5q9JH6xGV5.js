/*!CK:368329804!*//*1440626486,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["JjFjf"]); }

__d("TimelineSeenStateConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"};},null,{});
__d("TimelineViewportTrackingLogType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMPRESSION:"impression",DURATION:"duration"};},null,{});
__d('ProfileInfoRequestNoteFlyout',['CSS','csx','DOM','Event','LayerDestroyOnHide','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p){'use strict';this.$ProfileInfoRequestNoteFlyout1=p;this.$ProfileInfoRequestNoteFlyout2=j.scry(this.$ProfileInfoRequestNoteFlyout1.getContentRoot(),"._958")[0];m(k.listen(o,'click',this.$ProfileInfoRequestNoteFlyout3.bind(this)));m(this.$ProfileInfoRequestNoteFlyout1.subscribe('success',this.$ProfileInfoRequestNoteFlyout4.bind(this)));m(this.$ProfileInfoRequestNoteFlyout1.subscribe('hide',this.$ProfileInfoRequestNoteFlyout5.bind(this)));m(this.$ProfileInfoRequestNoteFlyout1.subscribe('error',this.$ProfileInfoRequestNoteFlyout6.bind(this)));}n.prototype.$ProfileInfoRequestNoteFlyout3=function(o){'use strict';this.$ProfileInfoRequestNoteFlyout1.show();o.kill();};n.prototype.$ProfileInfoRequestNoteFlyout6=function(o,p){'use strict';j.setContent(this.$ProfileInfoRequestNoteFlyout2,p.response.errorDescription);h.show(this.$ProfileInfoRequestNoteFlyout2);return false;};n.prototype.$ProfileInfoRequestNoteFlyout5=function(){'use strict';h.hide(this.$ProfileInfoRequestNoteFlyout2);};n.prototype.$ProfileInfoRequestNoteFlyout4=function(){'use strict';this.$ProfileInfoRequestNoteFlyout1.enableBehavior(l);this.$ProfileInfoRequestNoteFlyout1.hide();};f.exports=n;},null);
__d('TimelineContextItemLogger',['BanzaiLogger','Event','FBJSON','Parent','Run','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='MTimelineXContextItemsLoggerConfig',p='impression',q='click',r='context_item_url',s='event',t="_md0",u=[];function v(x,y,z){var aa=j.parse(x.getAttribute('data-store'));aa[s]=y;if(z)aa[r]=z;h.log(o,aa);}var w={logWhenVisible:function(x){if(!u.length)l.onLeave(function(){u=[];});u.push(x);},logWhenClicked:function(x){n(i.listen(x,'click',function(y){var z=y.getTarget();if(z.nodeName!=='A')return;var aa=k.byClass(z,t);aa&&v(aa,q,z.href);}));},listenToExpand:function(x){n(x.addListener('expanded',function(){while(u.length)v(u.pop(),p);}));}};f.exports=w;},null);
__d('TimelineSecondaryColumnUnitList',['CSS','DOM','Event','Run','csx','cx','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=30;function p(q,r){'use strict';var s=j.listen(r,'click',(function(){this.$TimelineSecondaryColumnUnitList1=i.scry(q,"._16f_");this.$TimelineSecondaryColumnUnitList2();i.remove(r);this.emit('expanded');}).bind(this));k.onLeave(s.remove.bind(s));}p.prototype.$TimelineSecondaryColumnUnitList2=function(){'use strict';if(!this.$TimelineSecondaryColumnUnitList1.length)return;h.removeClass(this.$TimelineSecondaryColumnUnitList1.shift(),"_16f_");setTimeout(this.$TimelineSecondaryColumnUnitList2.bind(this),o);};n(p,{expanded:true});f.exports=p;},null);
__d('TimelineQueryDataStore',['TimelinePageLoadParam','KeyedCallbackManager','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=new i(),l='num_reports_tried',m='num_reports_visible',n='more_pager_data',o='finished',p={getDataToLoadNextSegment:function(q,r){k.executeOrEnqueue(q,(function(s){this._mergeReportsAndStoriesDataCallback(s,r);}).bind(this));},setSectionFinished:function(q,r){var s=this._getSectionData(q);if(!s[o])s[o]={};s[o][r]=true;k.setResource(q,s);if(s[o].stories&&s[o].reports)this.emitAndHold('section_finished',q);},setReportsData:function(q,r,s){var t=this._getSectionData(q);t[l]=r;t[m]=s;k.setResource(q,t);},setStoriesData:function(q,r){var s=this._getSectionData(q);s[n]=r;k.setResource(q,s);},_getSectionData:function(q){var r=k.getResource(q);return r||{};},_mergeReportsAndStoriesDataCallback:function(q,r){var s=q[n];if(!s.hasOwnProperty(h.REQUEST_PARAM_NAME))s[h.REQUEST_PARAM_NAME]={};s[h.REQUEST_PARAM_NAME][h.REPORT_UNIT_COUNT]=q[l];var t=s[h.REQUEST_PARAM_NAME][h.VISIBLE_UNIT_COUNT];s[h.REQUEST_PARAM_NAME][h.VISIBLE_UNIT_COUNT]=t+q[m];r(s);}};j(p,{section_finished:true});f.exports=p;},null);
__d('TimelineSectionPager.react',['Arbiter','DataStore','Link.react','React','ReactDOM','ReactComponentWithPureRenderMixin','TimelineConstants','TimelineLegacySections','TimelineLoadState','TimelineQueryDataStore','UIPagelet','FeedPlaceHolderStory.react','OnVisible.react','$','cx','getElementRect','getViewportDimensions','keyMirror','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=k.PropTypes,ba=null,ca=false,da={},ea=y({LINK:null,ON_VISIBLE:null}),fa=500,ga=k.createClass({displayName:'TimelineSectionPager',_loading:ca,_storeListener:ba,_sectionLoadSubscription:ba,mixins:[m],propTypes:{loadMoreLabel:aa.string.isRequired,sectionKey:aa.string.isRequired,rootID:aa.string.isRequired},componentWillMount:function(){da[this.props.sectionKey]=this;this._loading=false;this._storeListener=q.addListener('section_finished',this._handleSectionFinished);this._sectionLoadSubscription=h.subscribe(n.SECTION_FULLY_LOADED,this._handleSectionLoad);},getInitialState:function(){return {buffer:0,pagerState:ea.ON_VISIBLE};},render:function(){if(this.state.pagerState===ea.LINK)return (k.createElement(j,{className:"_3g20",onClick:this._onPagerClick},this.props.loadMoreLabel));return (k.createElement(t,{buffer:this.state.buffer,onVisible:this._loadNextSegment,ref:'onVisible'},k.createElement(s,{className:"_lr_"})));},componentDidMount:function(){this._updateBuffer();},componentWillUnmount:function(){this._storeListener.remove();this._sectionLoadSubscription.unsubscribe();da[this.props.sectionKey]=null;},statics:{getInstance:function(ha){return da[ha];}},removeOnVisible:function(){this.setState({pagerState:ea.LINK});},restoreOnVisible:function(){this.setState({pagerState:ea.ON_VISIBLE});},unmount:function(){l.unmountComponentAtNode(u(this.props.rootID));},_onPagerClick:function(){var ha=o.get(this.props.sectionKey);if(ha)ha.activateContentScrollLoad();this._loadNextSegment();},_loadNextSegment:function(){if(this._loading)return;this._loading=true;var ha=o.get(this.props.sectionKey);if(ha&&ha.hasPendingCallbacks()){ha.runPendingDisplayCallbacks();this._onLoadComplete();}else q.getDataToLoadNextSegment(this.props.sectionKey,this._nextSegmentDataHandler);},_nextSegmentDataHandler:function(ha){var ia=o.get(this.props.sectionKey);if(ia){this._loadPagelet(ha);return;}var ja=h.subscribe(n.SECTION_REGISTERED,(function(ka,la){if(la.scrubberKey===this.props.sectionKey){this._loadPagelet(ha);ja.unsubscribe();}}).bind(this));},_loadPagelet:function(ha){var ia=ha.page_index,ja=o.get(this.props.sectionKey);if(!ja){this._loading=false;return;}var ka=ja.getPageLoadStatus(ia);if(ka!==p.NOT_LOADED){this._loading=false;this._enableNextPage();return;}var la=(function(na){return this._pageletDisplay(ia,na);}).bind(this),ma={append:true,constHeight:true,crossPage:true,displayCallback:la,finallyHandler:this._onLoadComplete,jsNonblock:true,usePipe:true};ja.setPageLoadStatus(ia,p.LOADING);r.loadFromEndpoint('ProfileTimelineSectionPagelet',ha.unit_container_id,ha,ma);},_handleSectionFinished:function(ha){if(ha===this.props.sectionKey)this.unmount();},_handleSectionLoad:function(ha,ia){if(ia.scrubberKey===this.props.sectionKey)this._updateBuffer();},_updateBuffer:function(){var ha=o.get(this.props.sectionKey),ia=0;if(ha&&!ha.isRightColumnFinished()){ia=i.get(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,this.props.sectionKey);if(!ia)ia=0;}var ja;z((function(){var ka=w(l.findDOMNode(this)),la=x().height,ma=ka.top-la-1,na=Math.abs(Math.min(ia,0))+fa;ja=Math.min(na,Math.max(ma,0));}).bind(this),(function(){this.setState({buffer:ja},(function(){if(this.refs.onVisible)this.refs.onVisible.reset();}).bind(this));}).bind(this));},_canScrollLoad:function(){var ha=o.get(this.props.sectionKey);return !!ha&&ha.canContentScrollLoad();},_onLoadComplete:function(){if(this.isMounted()){this._loading=false;this._enableNextPage();}},_enableNextPage:function(){this.setState({pagerState:this._canScrollLoad()?ea.ON_VISIBLE:ea.LINK});},_pageletDisplay:function(ha,ia){var ja=o.get(this.props.sectionKey);if(ja){ja.setPageLoadStatus(ha,p.LOADED);if(ja.canContentScrollLoad()){ia();}else ja.queueDisplayCallback(ha,ia);}}});f.exports=ga;},null);
__d('TimelineCapsule',['Arbiter','CSS','DataStore','DOM','DOMQuery','DOMScroll','Parent','TimelineConstants','TimelineLegacySections','Vector','$','csx','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=(function(){var v={},w={};function x(z){l.scry(z,"._3ram").forEach(function(aa){var ba=aa.getAttribute('data-endmarker'),ca=aa.getAttribute('data-pageindex'),da=function(){if(!aa.parentNode)return;j.set(o.DS_LOADED,z.id,ca);k.remove(aa);h.inform(o.SECTION_FULLY_LOADED,{scrubberKey:ba,pageIndex:ca,capsuleID:z.id,childCount:z.childNodes.length});};if(p.get(ba)){da();}else var ea=h.subscribe(o.SECTION_REGISTERED,function(fa,ga){if(ga.scrubberKey===ba){da();ea.unsubscribe();}});});h.inform('TimelineCapsule/balanced',{capsule:z});}function y(z,aa){var ba=n.byAttribute(z,'data-size');if(ba)if(i.hasClass(z.parentNode,'timelineReportContent')){aa(z);}else aa(ba);}return {removeUnit:function(z){y(z,function(aa){k.remove(aa);});},removeUnitWithID:function(z){u.removeUnit(r(z));},hideUnit:function(z){y(z,function(aa){i.addClass(aa,'fbTimelineColumnHidden');});},undoHideUnit:function(z,aa){k.remove(n.byClass(aa,'hiddenText'));y(z,function(ba){i.removeClass(ba,'fbTimelineColumnHidden');});},unplacehold:function(z){var aa=r(z);aa.style.top=null;i.removeClass(aa,'visiblePlaceholder');i.removeClass(aa,'placeholder');var ba=n.byClass(aa,'fbTimelineCapsule');delete v[ba.id][z];u.balanceCapsule(ba);},scrollToCapsule:function(z){if(!w.hasOwnProperty(z.id)){var aa=q.getElementPosition(z.parentNode);m.scrollTo(new q(q.getScrollPosition().x,aa.y-o.SCROLL_TO_OFFSET,'document'));w[z.id]=true;}},loadTwoColumnUnits:function(z,aa,ba){var ca=r(z);t(function(){var da=n.byClass(ca,'fbTimelineSection');if(da&&!aa){var ea=l.find(ca,"._2t4u"),fa=l.find(ca,"._2t4v"),ga=fa.offsetHeight-ea.offsetHeight;j.set(o.DS_COLUMN_HEIGHT_DIFFERENTIAL,ba,ga);}},x.bind(null,ca));}};})();f.exports=u;},null);
__d('TimelineSection',['Arbiter','CSS','DOM','Parent','ScrollingPager','TimelineConstants','TimelineLegacySections','TimelineLoadState','TimelineScrubberKey','UIPagelet','TimelineSectionPager.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(t,u,v,w,x){'use strict';this.$TimelineSection1=t;this.$TimelineSection2=w;this.$TimelineSection3=u;this.$TimelineSection4=null;this.$TimelineSection5=null;this.$TimelineSection6=true;this.$TimelineSection7=true;this.$TimelineSection8=u!==p.RECENT_ACTIVITY;this.$TimelineSection9=x;this.$TimelineSection10=v;this.$TimelineSection11={};this.$TimelineSection12=false;this.$TimelineSection13=[];this.$TimelineSection14=false;this.$TimelineSection15=[];}s.prototype.load=function(t,u){'use strict';if(this.$TimelineSection2){this.activateContentScrollLoad();return;}var v=this.$TimelineSection10;h.inform(m.SECTION_LOADING,{data:v,scrubberKey:this.$TimelineSection3});this.$TimelineSection2=true;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var w='ProfileTimelineSectionPagelet',x=this.$TimelineSection3===p.WAY_BACK;if(x)w='ProfileTimelineRemainingYearsPagelet';var y=n.shouldForceNoFriendActivity();v=babelHelpers._extends({},v,{highlight_unit_data:t,parent_key:this.$TimelineSection4,force_no_friend_activity:y});i.addClass(this.$TimelineSection1,'fbTimelineSectionLoading');this.$TimelineSection6=false;this.activateContentScrollLoad();if(u){this.$TimelineSection1.style.minHeight=window.innerHeight+'px';h.subscribeOnce(m.SECTION_FULLY_LOADED,(function(z,aa){if(aa.scrubberKey===this.$TimelineSection3){this.$TimelineSection1.style.minHeight='';n.destroyOnVisible(this.$TimelineSection3);}}).bind(this));}n.addLoadPagelet(this.$TimelineSection3,q.loadFromEndpoint(w,this.$TimelineSection1.id,v,{usePipe:true,jsNonblock:true,constHeight:true,append:false}));n.collapsePlaceHolderHeaders();};s.prototype.preload=function(){'use strict';i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var t=j.find(this.$TimelineSection1,'span.sectionLabel');if(t.getAttribute('data-original-label')){j.setContent(t,t.getAttribute('data-original-label'));t.removeAttribute('data-original-label');}};s.prototype.unload=function(){'use strict';if(!this.$TimelineSection2||!this.$TimelineSection8)return;this.$TimelineSection2=false;n.cancelLoadPagelet(this.$TimelineSection3);i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');if(this.$TimelineSection1.nextSibling&&i.hasClass(this.$TimelineSection1.nextSibling,'fbTimelineSection')){j.setContent(this.$TimelineSection1,this.$TimelineSection1.nextSibling);i.show(this.$TimelineSection1.firstChild);}else j.empty(this.$TimelineSection1);this.deactivateScrollLoad();};s.prototype.canScrollLoad=function(){'use strict';return this.$TimelineSection6;};s.prototype.activateScrollLoad=function(){'use strict';this.$TimelineSection6=true;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var t=n.getOnVisible(this.$TimelineSection3);if(t)t.reset();return this;};s.prototype.deactivateScrollLoad=function(){'use strict';if(!this.$TimelineSection2){this.$TimelineSection6=false;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var t=n.getOnVisible(this.$TimelineSection3);if(t)t.remove();}j.scry(this.$TimelineSection1,'.fbTimelineSectionExpandPager').forEach(function(u){var v=l.getInstance(u.id);v&&v.removeOnVisible();var w=k.byClass(u,'stat_elem');if(w)i.removeClass(w,'async_saving');});return this;};s.prototype.canContentScrollLoad=function(){'use strict';return this.$TimelineSection7;};s.prototype.activateContentScrollLoad=function(){'use strict';this.$TimelineSection7=true;var t=r.getInstance(this.$TimelineSection3);if(t)t.restoreOnVisible();return this;};s.prototype.deactivateContentScrollLoad=function(){'use strict';this.$TimelineSection7=false;var t=r.getInstance(this.$TimelineSection3);if(t)t.removeOnVisible();return this;};s.prototype.removeSectionPager=function(){'use strict';var t=r.getInstance(this.$TimelineSection3);if(t)t.unmount();return this;};s.prototype.getNode=function(){'use strict';return this.$TimelineSection1;};s.prototype.getScrubberKey=function(){'use strict';return this.$TimelineSection3;};s.prototype.getParentKey=function(){'use strict';return this.$TimelineSection4;};s.prototype.setParentKey=function(t){'use strict';this.$TimelineSection4=t;return this;};s.prototype.addSubSection=function(t,u){'use strict';if(!Array.isArray(this.$TimelineSection5))this.$TimelineSection5=[];if(Array.isArray(this.$TimelineSection5))this.$TimelineSection5[t]=u;return this;};s.prototype.getSubSections=function(){'use strict';return this.$TimelineSection5;};s.prototype.isLoaded=function(){'use strict';return this.$TimelineSection2;};s.prototype.isRightColumnFinished=function(){'use strict';return this.$TimelineSection12;};s.prototype.setRightColumnFinished=function(){'use strict';this.$TimelineSection12=true;return this;};s.prototype.getHistoricUnitCount=function(){'use strict';return this.$TimelineSection9;};s.prototype.setExpandLoadData=function(t){'use strict';this.$TimelineSection11=t;return this;};s.prototype.expand=function(t){'use strict';if(!this.$TimelineSection2)return this;var u=j.find(this.$TimelineSection1,'.fbTimelineSectionExpander');i.addClass(u.firstChild,'async_saving');t&&i.addClass(t,'async_saving');h.inform(m.SECTION_EXPAND,this.$TimelineSection3);j.scry(this.$TimelineSection1,'.fbTimelineCapsule').forEach(j.remove);this.$TimelineSection11.new_expand=true;n.cancelLoadPagelet(this.$TimelineSection3);n.addLoadPagelet(this.$TimelineSection3,q.loadFromEndpoint('ProfileTimelineSectionPagelet',u.id,this.$TimelineSection11,{usePipe:true,jsNonblock:true,constHeight:true}));return this;};s.prototype.isPermalinkPeriod=function(){'use strict';return !!this.$TimelineSection10.is_permalink_period;};s.prototype.isHidden=function(){'use strict';return this.$TimelineSection14;};s.prototype.hide=function(){'use strict';this.$TimelineSection14=true;i.hide(j.find(this.$TimelineSection1,'.fbTimelineSection'));return this;};s.prototype.isHiddenFromView=function(){'use strict';return (!this.$TimelineSection2||this.$TimelineSection14||i.hasClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded'));};s.prototype.hasPendingCallbacks=function(){'use strict';return this.$TimelineSection13.length>0;};s.prototype.queueDisplayCallback=function(t,u){'use strict';this.$TimelineSection13[t]=u;return this;};s.prototype.runPendingDisplayCallbacks=function(){'use strict';while(this.hasPendingCallbacks()){var t=this.$TimelineSection13.shift();if(t)t();}return this;};s.prototype.setPageLoadStatus=function(t,u){'use strict';this.$TimelineSection15[t]=u;return this;};s.prototype.getPageLoadStatus=function(t){'use strict';if(this.$TimelineSection15[t]===undefined)this.$TimelineSection15[t]=o.NOT_LOADED;return this.$TimelineSection15[t];};f.exports=s;},null);
__d('TimelineContentLoader',['Arbiter','CSS','DOM','DOMScroll','Event','OnVisible','Parent','ScrollingPager','setImmediate','TimelineComponentKeys','TimelineConstants','TimelineController','TimelineDOMID','TimelineGating','TimelineLegacySections','TimelineQueryDataStore','TimelineScrubberKey','TimelineSection','TimelineSmartInsert','Vector','$','arrayContains','createArrayFromMixed','csx','debounce','ge','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){if(c.__markCompiled)c.__markCompiled();var ia=false,ja=null,ka={},la={},ma=[],na={},oa=null,pa=null,qa=null,ra=80,sa=250,ta=500;function ua(){if(ia)return;s.register(q.CONTENT,ab);pa=h.subscribe(r.SECTION_EXPAND,function(bb,cb){ab.navigateToSection(cb);});qa=w.addRetroactiveListener('section_finished',xa);ia=true;}var va=fa(function(bb,cb,db){var eb=v.get(bb).getHistoricUnitCount();cb-=eb;db-=1;if(eb==-1||db<=0||cb<0)return;var fb=ab.getNextSectionKey(bb);if(fb){v.get(fb).load();va(fb,cb,db);}},ta);function wa(bb,cb){if(!cb)cb=0;if(cb<ra&&!bb())setTimeout(wa.bind(null,bb,cb+1),sa);}function xa(bb){wa(function(){if(bb===x.WAY_BACK)return true;var cb=ab.getNextSectionKey(bb);if(cb){za(cb);return true;}return false;});}function ya(bb,cb,db){wa(function(){if(cb===x.WAY_BACK)return true;var eb=ab.getNextSectionKey(cb);if(eb){v.addOnVisible(eb,new m(bb,za.bind(null,eb),false,db||1000));return true;}return false;});}function za(bb){var cb=v.get(bb);if(cb&&cb.canScrollLoad()){cb.load();if(oa)va(bb,oa.required_units,oa.max_parallelism);}}var ab={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(bb,cb,db,eb,fb,gb,hb){ua();if(ca(ma,cb))return;if(la)Object.assign(db||{},la);var ib=new y(bb,cb,db,eb,hb);if(!fb){v.setMainSectionOrder(cb,gb);ka[cb]=true;}else{ib.setParentKey(fb);var jb=v.get(fb);if(jb)jb.addSubSection(gb,ib);}v.set(cb,ib);ab.checkCurrentSectionChange();h.inform(r.SECTION_REGISTERED,{scrubberKey:cb,section:ib});},reset:function(){v.removeAllOnVisibles();v.cancelLoadPagelets();for(var bb in na){na[bb].unsubscribe();delete na[bb];}pa&&pa.unsubscribe();pa=null;qa&&qa.remove();qa=null;v.removeAll();ja=null;ka={};la={};ma=[];ia=false;},checkCurrentSectionChange:function(){var bb=null;ha(function(){bb=ab.getCurrentSection();},function(){var cb=ja&&ja.getScrubberKey();if(bb&&bb.getScrubberKey()!==cb&&!bb.isPermalinkPeriod()){ja=bb;var db=bb.getScrubberKey(),eb=bb.getParentKey();if(!eb){eb=db;db=null;}s.sectionHasChanged(eb,db);}});},setParallelLoadConfig:function(bb){oa=bb;},getCurrentSection:function(){var bb={},cb=v.getAll();for(var db in cb){var eb=cb[db];if(!eb||eb.isHiddenFromView())continue;var fb=aa.getElementPosition(eb.getNode(),'viewport').y;if(eb.getScrubberKey()===x.RECENT_ACTIVITY)fb--;if(fb<ab.CURRENT_SECTION_OFFSET)bb[fb]=eb;}var gb=Math.max.apply(null,Object.keys(bb)),hb=v.getMainSectionOrder(),ib=gb==-Infinity;if(!ib){return bb[gb];}else if(hb[0])return v.get(hb[0]);return null;},getLastVisibleSection:function(){var bb=v.getMainSectionOrder();for(var cb=bb.length-1;cb>=0;cb--){var db=v.get(bb[cb]);if(db&&!db.isHiddenFromView())return db;}return null;},getRecentActivitySection:function(){return v.get(x.RECENT_ACTIVITY);},capsuleForCurrentSection:function(){var bb=ab.getCurrentSection();return bb&&j.scry(bb.getNode(),'.fbTimelineCapsule')[0];},enableScrollLoad:function(bb,cb,db,eb){bb=ba(bb);var fb=n.byClass(bb,'fbTimelineSection')||bb.parentNode,gb=fb&&j.scry(fb,'.fbTimelineCapsule')[0];if(!gb)return;if(db===null){ya(bb,cb,eb);}else s.runOnceWhenSectionFullyLoaded(ya.bind(null,bb,cb,eb),cb,db);},expandSectionOnClick:function(bb,cb){l.listen(bb,'click',function(db){db.prevent();v.get(cb).expand();});},expandSubSectionsOnClick:function(bb,cb){l.listen(bb,'click',function(db){db.prevent();v.cancelLoadPagelet(cb);var eb=v.get(cb),fb=eb.getSubSections();if(fb&&fb.length)ab.navigateToSection(fb[0].getScrubberKey());});},getNextSectionKey:function(bb){var cb=v.getMainSectionOrder();for(var db=0;db<cb.length-1;db++)if(cb[db]==bb){while(db<cb.length-1&&!cb[db+1])db++;return cb[db+1];}var eb=v.get(bb);if(!eb||!eb.getParentKey())return;var fb=v.get(eb.getParentKey());if(!fb)return;var gb=fb.getSubSections(),hb=gb[gb.length-1];if(eb.getScrubberKey()===hb.getScrubberKey())return ab.getNextSectionKey(eb.getParentKey());for(var ib=0;ib<gb.length-1;ib++)if(gb[ib].getScrubberKey()==bb)return gb[ib+1].getScrubberKey();},hideSection:function(bb){var cb=v.get(bb);if(cb)cb.hide();var db=s.getCurrentScrubber();if(db){var eb=null;if(!ka[bb]){eb=s.getCurrentScrubber().getSubnav(cb.getParentKey(),bb);}else eb=s.getCurrentScrubber().getNav(bb);eb&&i.hide(eb);}var fb=s.getCurrentStickyHeaderNav();fb&&fb.removeTimePeriod(bb);},loadSectionOnClick:function(bb,cb){l.listen(bb,'click',function(db){db.prevent();v.get(cb).load();});},removeSection:function(bb){v.removeOnVisible(bb);v.remove(bb);delete ka[bb];var cb=s.getCurrentStickyHeaderNav();cb&&cb.removeTimePeriod(bb);ma.push(bb);},removeSectionParent:function(bb){j.remove(ba(bb).parentNode);},navigateToSection:function(bb,cb,db){cb=!!cb;var eb=bb,fb=v.get(bb);if(!fb)return;if(!fb.isLoaded()){z.enable();j.scry(ba(t.TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(j.remove);}if(!ka[bb]){if(!fb.isLoaded())fb.getNode().style.minHeight=aa.getViewportDimensions().y+'px';var gb=h.subscribe(r.SECTION_FULLY_LOADED,function(qb,rb){if(rb.scrubberKey===bb){fb.getNode().style.minHeight='';gb.unsubscribe();}});eb=fb.getParentKey();var hb=v.get(eb);if(hb){var ib=hb.getNode();hb.removeSectionPager();if(!i.hasClass(ib,'fbTimelineSectionExpanded')){k.scrollTo(ib,0);i.addClass(ib,'fbTimelineSectionExpanded');j.scry(ib,'.fbTimelineCapsule').forEach(j.remove);j.scry(ib,'div.fbTimelineSectionExpandPager').forEach(j.remove);j.scry(ib,'div.fbTimelineContentHeader').forEach(j.remove);j.scry(ib,"._5vf").forEach(function(qb){if(!qb.getAttribute('data-subsection'))j.remove(qb);});}}var jb=ab.getNextSectionKey(eb),kb=v.getOnVisible(jb);if(kb)kb.setBuffer(0);}var lb=v.getMainSectionOrder();for(var mb=0;mb<lb.length;mb++){var nb=lb[mb];if(!nb)continue;if(nb==eb)break;v.get(nb).deactivateScrollLoad().deactivateContentScrollLoad();}fb.load(db,true);v.collapsePlaceHolderHeaders();var ob=aa.getScrollPosition().x,pb=aa.getElementPosition(fb.getNode()).y;if(!cb)k.scrollTo(new aa(ob,pb-r.SCROLL_TO_OFFSET,'document'),!u.noScrollAnimation,false,false,0,function(){var qb=aa.getElementPosition(fb.getNode()).y;k.scrollTo(new aa(ob,qb-r.SCROLL_TO_OFFSET,'document'),false);if(bb!==x.RECENT_ACTIVITY){var rb=j.scry(fb.getNode(),'h3.uiHeaderTitle')[0];if(rb){rb.tabIndex=0;rb.focus();}}});},appendContentAfterLoad:function(bb,cb,db){s.runOnceWhenSectionFullyLoaded(j.appendContent.bind(null,ba(bb),cb),db,'0');},markSectionAsLoaded:function(bb,cb,db){s.runOnceWhenSectionFullyLoaded(function(){ga(bb)&&i.removeClass(ba(bb).parentNode,'fbTimelineSectionLoading');},cb,db);},scrollToTimeline:function(bb,cb){s.runOnceWhenSectionFullyLoaded(function(){var db=ba('fbTimelineHeadline');p(function(){k.scrollTo(db);});},bb,cb);},suppressSectionsAbove:function(bb){var cb,db,eb=v.getMainSectionOrder();for(var fb=0;fb<eb.length;fb++){var gb=eb[fb];if(!gb)continue;cb=v.get(gb).getNode();db=null;if(da(bb.parentNode.children).indexOf(bb)<=da(cb.parentNode.children).indexOf(cb)){db=gb;break;}v.get(gb).deactivateScrollLoad();}if(db)ab.navigateToSection(db,true);},forceNoFriendActivity:function(){v.forceNoFriendActivity();},removeDupes:function(bb){var cb=ga(bb);if(!cb)return;var db=j.scry(cb,'li.fbTimelineUnit'),eb={};for(var fb=0;fb<db.length;fb++){var gb=db[fb];if(gb.id&&gb.id.startsWith('tl_unit_')){var hb=gb.id.substring(8,gb.id.length),ib=j.scry(gb,'div.timelineUnitContainer');if(ib.length>0)hb=hb+ib[0].getAttribute('data-time');if(eb.hasOwnProperty(hb)){gb.id='dupe_unit_'+Math.random();gb.className="hidden_elem";}else eb[hb]=1;}}},removeLoadingState:function(bb){ga(bb)&&i.removeClass(ba(bb),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(bb,cb){var db=v.get(bb);db&&db.setExpandLoadData(cb);},updatePagerAfterLoad:function(bb,cb,db,eb,fb){var gb=o.getInstance(bb.firstChild.id);if(!gb){na[bb.firstChild.id]=h.subscribe(o.REGISTERED,function(ib,jb){na[bb.firstChild.id].unsubscribe();delete na[bb.firstChild.id];if(jb.id===bb.firstChild.id)ab.updatePagerAfterLoad(bb,cb,db,eb,fb);});return;}var hb=gb.getHandler();gb.setHandler(function(ib){i.addClass(bb,'async_saving');hb(ib);});s.runOnceWhenSectionFullyLoaded(function(){i.removeClass(bb,'fbTimelineHiddenPager');gb.checkBuffer();},db,eb);if(fb)s.runOnceWhenSectionFullyLoaded(s.adjustScrollingPagerBuffer.bind(null,bb.firstChild.id,db),db,eb);},repositionDialog:function(bb){h.subscribe(r.SECTION_LOADED,function(){bb.updatePosition();});},rightColumnFinished:function(bb){var cb=v.get(bb);cb.setRightColumnFinished();}};f.exports=ab;},null);
__d('TimelineLogging',['TimelineComponentKeys','TimelineController','reportData'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=false,l=0,m=null,n=null,o={init:function(p){if(k)return;l=p;i.register(h.LOGGING,this);},reset:function(){k=false;l=0;m=null;},log:function(p,q){q.profile_id=l;j(p,{gt:q});},logSectionChange:function(p,q){var r={timeline_section_change:1,key:p};if(m&&p==m){r.timeline_scrubber=1;m=null;}if(n&&p==n){r.sticky_header_nav=1;n=null;}o.log('timeline',r);},logScrubberClick:function(p){m=p;},logStickyHeaderNavClick:function(p){n=p;}};f.exports=o;},null);
__d('TimelineStickyColumn',['Arbiter','CSS','DOMQuery','Event','Run','Style','TimelineConstants','TimelineContentLoader','UITinyViewportAction','Vector','csx','queryThenMutateDOM','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=100,v=15,w=15,x=35,y="._2t4u",z="._5nb8",aa="._2t4v",ba=false,ca={},da=null,ea=null,fa=null,ga,ha,ia,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa;function ra(){var jb;t('PhotoSnowlift',function(lb){return jb=lb;});if(jb){var kb=jb.getInstance();return !!kb.isOpen;}return false;}function sa(){if(ra())return;ga=o.getCurrentSection();ha=o.getRecentActivitySection();if(!ga||!ga.isRightColumnFinished())return;var jb,kb;if(ca.hasDecoupledColumns){jb=db(ha);kb=bb(ha);}else{kb=bb(ga);jb=cb(ga);}ja=jb?jb.offsetHeight:0;ka=kb?kb.offsetHeight:0;la=q.getViewportDimensions().y;pa=jb?q.getElementPosition(jb).y:0;ia=o.getLastVisibleSection();ma=ga.getNode().offsetHeight;qa=document.body.clientWidth<document.body.scrollWidth;}function ta(){if(!ca.hasDecoupledColumns&&ga)return ga.isRightColumnFinished();if(ha&&ga===ha&&na>=oa)return ha.isRightColumnFinished();return true;}function ua(){if(!ga||ra())return;if(!ca.hasDecoupledColumns&&fa&&fa!==ga){var jb=bb(fa);if(jb)eb(jb,'','','');}oa=na;na=q.getScrollPosition().y;var kb;if(ca.hasDecoupledColumns){kb=bb(ha);}else kb=bb(ga);if(!kb)return;if(qa){eb(kb,'','','');return;}if(ta()){va(kb);fa=ya(kb)==='fixed'?ga:null;}}function va(jb){if(ka>=ja||ja<=la)return;var kb=pa-fb();if(na<=kb){eb(jb,'','','');return;}var lb=w+x,mb=na+la-lb,nb=na+ka+fb(),ob=pa+ma;if(ga===ia)ob+=x;if(!ca.hasDecoupledColumns&&ob<=Math.min(nb,mb)){eb(jb,'absolute','',w+'px');return;}var pb=la-w-fb();if(ka<=pb){eb(jb,'fixed',fb()+'px','');return;}if(na<oa){wa(jb);}else xa(jb);}function wa(jb){var kb=false;if(ya(jb)==='absolute'){var lb=pa+ja-fb(),mb=na+fb()-pa;if(!!ab(jb)&&mb<=ab(jb)){kb=true;}else if(jb.style.bottom!==''&&na<=lb-ka)kb=true;}if(kb){eb(jb,'fixed',fb()+'px','');return;}if(ya(jb)==='absolute'&&!!ab(jb))return;if(za(jb)){if(ab(jb)>=fb())return;var nb=la-x,ob=na-pa-(ka-nb);if(ga===ha)ob+=u;if(oa)ob+=oa-na;eb(jb,'absolute',ob+'px','');return;}}function xa(jb){var kb,lb=false;if(!za(jb)){kb=ab(jb);var mb=na+la+x,nb=pa+kb+ka;if(mb>=nb)lb=true;}if(!lb)if(na===oa||!za(jb))return;if(lb){kb=la-ka-w-x;eb(jb,'fixed',kb+'px','');return;}if(za(jb)&&ab(jb)>=fb()){kb=na-pa+fb();if(oa)kb+=oa-na;eb(jb,'absolute',kb+'px','');}}function ya(jb){switch(jb.style.position){case 'absolute':case 'static':return jb.style.position;default:return i.hasClass(jb,'fixed_always')?'fixed':'static';}}function za(jb){switch(ya(jb)){case 'absolute':case 'static':return false;default:return true;}}function ab(jb){return jb.style.top?parseInt(jb.style.top,10):0;}function bb(jb){if(jb)return j.scry(jb.getNode(),aa)[0];return null;}function cb(jb){if(jb)return j.scry(jb.getNode(),y)[0];return null;}function db(jb){if(jb)return j.scry(jb.getNode(),z)[0];return null;}function eb(jb,kb,lb,mb){m.set(jb,'bottom',mb);if(kb==='fixed'){i.addClass(jb,'fixed_always');m.set(jb,'position','');}else{i.removeClass(jb,'fixed_always');m.set(jb,'position',kb);}m.set(jb,'top',lb);h.inform('reflow');}function fb(){return p.isTiny()?v:u;}function gb(){s(sa,ua);}function hb(){ba=false;fa=null;while(da&&da.length)da.pop().remove();da=null;if(ea)ea.unsubscribe();}var ib={init:function(jb){if(!ba){ba=true;ca=jb;da=[k.listen(window,'scroll',gb),k.listen(window,'resize',gb)];ea=h.subscribe(n.SECTION_FULLY_LOADED,gb);l.onLeave(hb);}},adjust:function(){if(ba){sa();ua();}}};f.exports=ib;},null);
__d('TimelineViewportTracking',['Arbiter','Banzai','DOM','TimelineSeenStateConstants','TimelineViewportTrackingLogType','ViewportTracking','$','csx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s;q=babelHelpers.inherits(t,m);r=q&&q.prototype;t.prototype.getAllStories=function(){'use strict';var u=j.scry(this.getStream(),"._5pat"),v=[];for(var w=0;w<u.length;w++)if(this.getStoryID(u[w]))v.push(u[w]);return v;};t.prototype.getStream=function(){'use strict';if(!this.$TimelineViewportTracking1)this.$TimelineViewportTracking1=n('timeline_tab_content');return this.$TimelineViewportTracking1;};t.prototype.getStoryID=function(u){'use strict';var v=JSON.parse(u.getAttribute('data-ft')),w=k.FT_TIMELINE_HASH_IDENTIFIER_KEY;return v[w];};t.prototype.getDataToLog=function(u){'use strict';var v=JSON.parse(u.getAttribute('data-ft'));return {ft:v,log_type:l.IMPRESSION};};t.prototype.getTimetrackingDataToLog=function(u){'use strict';var v=r.getTimetrackingDataToLog.call(this,u);v.log_type=l.DURATION;return v;};t.prototype.sendDataToLog=function(u,v,w,x){'use strict';if(!v.ft)return;var y={};if(x)y.retry=x;if(w)y.delay=2000;i.post('timeline_feed_tracking',v,y);};t.prototype.getDataFromConfig=function(u){'use strict';this.timeout=u.record_delay;this.isSeenStateLoggingEnabled=u.is_seen_state_logging_enabled;this.isTimetrackingEnabled=u.is_timetracking_enabled;this.vpvdDebug=!!u.vpvd_debug;p(h.subscribe(['TimelineConstants/unitSegmentLoaded'],(function(){this.invalidateAllStoriesCache();this.invalidateVisibleStoriesCache();}).bind(this)));};t.prototype.getTimeout=function(){'use strict';return this.timeout;};t.prototype.cleanup=function(){'use strict';s=null;r.cleanup.call(this);};function t(){'use strict';q.apply(this,arguments);}f.exports={getInstance:function(){return s;},init:function(u){if(s)return;s=new t();s.init(u);}};},null);